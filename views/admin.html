<h2>Hasta Ekle</h2>

<form method="POST" action="/admin/hasta-ekle">
  <input name="ad" placeholder="Hasta Adı" required><br><br>

  <label>Cihaz:</label>
  <select name="cihaz" required>
    <!-- 1–43 -->
    <script>
      for (let i = 1; i <= 43; i++) {
        document.write(`<option value="${i}">${i}</option>`);
      }
    </script>
  </select>
  <br><br>

  <label>Gün Grubu:</label>
  <select name="gunGrubu" required>
    <option>Pzt-Çrş-Cum</option>
    <option>Sal-Per-Cts</option>
  </select>
  <br><br>

  <label>Seans:</label>
  <select name="seans" required>
    <option>Sabah</option>
    <option>Öğle</option>
  </select>
  <br><br>

  <button type="submit">Hasta Kaydet</button>
</form>

<hr>



<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Admin Paneli</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="dashboard">
    <h1>Admin Paneli</h1>

    <h3>Haftalık Saat Özeti</h3>
    <div id="ozet"></div>

    <form method="POST" action="/haftalik-reset">
      <button type="submit">Haftalık Reset</button>
    </form>

    <a href="/logout">Çıkış</a>
  </div>

  <script>
    fetch("/seans-ozet")
      .then(r => r.json())
      .then(data => {
        let html = "";
        data.forEach(o => {
          html += `<p>${o.hemsire} : ${o.saat} saat</p>`;
        });
        document.getElementById("ozet").innerHTML = html;
      });
  </script>
</body>
</html>
<h3>Kayıtlı Hastalar</h3>
<ul id="hastaListesi"></ul>

<script>
fetch("/admin/hastalar")
  .then(r => r.json())
  .then(data => {
    const ul = document.getElementById("hastaListesi");
    ul.innerHTML = "";
    data.forEach(h => {
      ul.innerHTML += `<li>
        ${h.ad} | Cihaz ${h.cihaz} | ${h.seans} | ${h.gunGrubu}
      </li>`;
    });
  });
</script>
